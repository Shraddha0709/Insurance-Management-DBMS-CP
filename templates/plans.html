<!-- templates/plans.html -->
{% extends "base.html" %}
{% block title %}Plans - IMS{% endblock %}

{% block content %}
<div class="flex justify-between mb-2">
    <h1>Insurance Plans</h1>
    <a href="{{ url_for('add_plan') }}" class="btn btn-primary">Add New Plan</a>
</div>

<div class="card">
    {% if plans %}
    <table>
        <thead>
            <tr>
                <th>Plan No</th>
                <th>Name</th>
                <th>MMA</th>
                <th>Sum Assured Range</th>
                <th>Age Range</th>
                <th>Payment Modes</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for plan in plans %}
            <tr>
                <td>{{ plan.Plan_no }}</td>
                <td>{{ plan.Name }}</td>
                <td>{{ plan.MMA }}</td>
                <td>₹{{ "{:,.0f}".format(plan.Min_SA) }} - ₹{{ "{:,.0f}".format(plan.Max_SA) }}</td>
                <td>{{ plan.Min_Age }} - {{ plan.Max_Age }}</td>
                <td>
                    {% if plan.Yearly %}Y{% endif %}
                    {% if plan.Half_yearly %}H{% endif %}
                    {% if plan.Quarterly %}Q{% endif %}
                    {% if plan.Monthly %}M{% endif %}
                </td>
                <td>
                    <a href="{{ url_for('edit_plan', plan_no=plan.Plan_no) }}" class="btn btn-sm btn-secondary">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-center">No plans available. Create your first plan!</p>
    {% endif %}
</div>
{% endblock %}

